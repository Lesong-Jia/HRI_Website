{"remainingRequest":"/Users/byo_0/Desktop/unity3d-vue/node_modules/babel-loader/lib/index.js!/Users/byo_0/Desktop/unity3d-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/byo_0/Desktop/unity3d-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/byo_0/Desktop/unity3d-vue/src/views/lastQuestionnaire/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/byo_0/Desktop/unity3d-vue/src/views/lastQuestionnaire/index.vue","mtime":1706923579275},{"path":"/Users/byo_0/Desktop/unity3d-vue/babel.config.js","mtime":1706923579268},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/cache-loader/dist/cjs.js","mtime":1706926219963},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/babel-loader/lib/index.js","mtime":1706926220370},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/cache-loader/dist/cjs.js","mtime":1706926219963},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/vue-loader/lib/index.js","mtime":1706926220653}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGFwaSBmcm9tICJAL2FwaS9pbmRleC5qcyI7CmltcG9ydCBzdGVwT25lIGZyb20gIi4vY29tcG9uZW50cy9zdGVwT25lLnZ1ZSI7CmltcG9ydCBzdGVwVHdvIGZyb20gIi4vY29tcG9uZW50cy9zdGVwVHdvLnZ1ZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsYXN0IiwKICBjb21wb25lbnRzOiB7CiAgICBzdGVwT25lLAogICAgc3RlcFR3bwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBhY3RpdmU6IDEsCiAgICAgIGZvcm06IHt9LAogICAgICByYWRpb1N0eWxlOiB7CiAgICAgICAgZGlzcGxheTogImJsb2NrIiwKICAgICAgICBoZWlnaHQ6ICIzMHB4IiwKICAgICAgICBsaW5lSGVpZ2h0OiAiMzBweCIKICAgICAgfSwKICAgICAgbGFiZWxDb2w6IHsKICAgICAgICB4czogewogICAgICAgICAgc3BhbjogMTgKICAgICAgICB9LAogICAgICAgIHNtOiB7CiAgICAgICAgICBzcGFuOiA0CiAgICAgICAgfQogICAgICB9LAogICAgICB3cmFwcGVyQ29sOiB7CiAgICAgICAgeHM6IHsKICAgICAgICAgIHNwYW46IDI0CiAgICAgICAgfSwKICAgICAgICBzbTogewogICAgICAgICAgc3BhbjogMTkKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogIH0sCiAgd2F0Y2g6IHsKICAgIGFjdGl2ZSh2YWwpIHsKICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0KCkgewogICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAxKSB7CiAgICAgICAgdGhpcy4kcmVmcy5zdGVwT25lLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgIC4uLnRoaXMuZm9ybSwKICAgICAgICAgICAgLi4udGhpcy4kcmVmcy5zdGVwT25lLmZvcm0KICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmFjdGl2ZSA9IDI7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy5zdGVwVHdvLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy4kcmVmcy5zdGVwVHdvLmlzSW5wdXRPdGhlcnMpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuJHJlZnMuc3RlcFR3by5mb3JtLnJhZGlvMSA9PT0gIkQuIFNlbGYgZGVzY3JpYmU6IikgewogICAgICAgICAgICB0aGlzLiRyZWZzLnN0ZXBUd28uZm9ybS5yYWRpbzEgPSB0aGlzLiRyZWZzLnN0ZXBUd28uZm9ybS5yYWRpbzEgKyB0aGlzLiRyZWZzLnN0ZXBUd28ub3RoZXJzOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgICAuLi50aGlzLmZvcm0sCiAgICAgICAgICAgIC4uLnRoaXMuJHJlZnMuc3RlcFR3by5mb3JtCiAgICAgICAgICB9OwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgICAgIC8v5L+d5a2Y5pyA5ZCO5LiA5qyh6Zeu5Y23CiAgICAgICAgICB0aGF0LiRzdG9yZS5jb21taXQoIlNFVF9BTExfUVVFU1RJT05fRk9STSIsIHsKICAgICAgICAgICAgLi4udGhhdC5hbGxRdWVzdGlvbkZvcm0sCiAgICAgICAgICAgIGxhc3RRdWVzdGlvbm5haXJlOiB7CiAgICAgICAgICAgICAgLi4udGhhdC5mb3JtCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuZFRpbWU6IG1vbWVudCgpLmZvcm1hdCgiWVlZWS1NTS1ERCBISDptbTpzcyIpCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoYXQubG9hZGluZyA9IHRydWU7CiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuc3VibWl0Rm9ybSh7CiAgICAgICAgICAgIC4uLnRoYXQuYWxsUXVlc3Rpb25Gb3JtLAogICAgICAgICAgICBpbmRleDogdGhpcy5nYW1lR3JvdXBUeXBlCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcygiU3VibWl0dGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9BTExfUVVFU1RJT05fRk9STSIsIHt9KTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfR0FNRV9TVEVQIiwgIiIpOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9RVUVTX1NURVAiLCAiIik7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX0lTX1BBU1MiLCB0cnVlKTsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoImh0dHBzOi8vY29ubmVjdC5jbG91ZHJlc2VhcmNoLmNvbS9wYXJ0aWNpcGFudC9wcm9qZWN0LzNmMDdjOGU5OWE0NDQ5NzFhMmM3YjE2ZGU0NjhkNDgzL2NvbXBsZXRlIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja1JhZGlvKGl0ZW0sIGtleSkgewogICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCBrZXksIGl0ZW0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["api","stepOne","stepTwo","moment","name","components","data","loading","active","form","radioStyle","display","height","lineHeight","labelCol","xs","span","sm","wrapperCol","mounted","window","scrollTo","watch","val","methods","handleSubmit","that","$refs","validate","valid","isInputOthers","radio1","others","console","log","$store","commit","allQuestionForm","lastQuestionnaire","endTime","format","res","submitForm","index","gameGroupType","code","$message","success","location","replace","error","message","checkRadio","item","key","$set"],"sources":["src/views/lastQuestionnaire/index.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"content\">\n      <stepOne ref=\"stepOne\" v-if=\"active === 1\" />\n      <stepTwo ref=\"stepTwo\" v-if=\"active === 2\" />\n    </div>\n    <div class=\"input-wrapper\">\n      <a-button\n        type=\"primary\"\n        shape=\"round\"\n        :disabled=\"loading\"\n        :loading=\"loading\"\n        @click=\"handleSubmit\"\n      >\n        {{ active === 1 ? \"Next\" : \"Submit\" }}\n      </a-button>\n    </div>\n  </div>\n</template>\n<script>\nimport api from \"@/api/index.js\";\nimport stepOne from \"./components/stepOne.vue\";\nimport stepTwo from \"./components/stepTwo.vue\";\nimport moment from \"moment\";\nexport default {\n  name: \"last\",\n  components: { stepOne, stepTwo },\n  data() {\n    return {\n      loading: false,\n      active: 1,\n      form: {},\n      radioStyle: {\n        display: \"block\",\n        height: \"30px\",\n        lineHeight: \"30px\",\n      },\n      labelCol: {\n        xs: { span: 18 },\n        sm: { span: 4 },\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 19 },\n      },\n    };\n  },\n  mounted() {\n    window.scrollTo(0, 0);\n  },\n  watch: {\n    active(val) {\n      window.scrollTo(0, 0);\n    },\n  },\n  methods: {\n    handleSubmit() {\n      const that = this;\n      if (this.active === 1) {\n        this.$refs.stepOne.$refs[\"form\"].validate(async (valid) => {\n          if (!valid) {\n            return;\n          }\n          this.form = { ...this.form, ...this.$refs.stepOne.form };\n          this.active = 2;\n        });\n      } else {\n        this.$refs.stepTwo.$refs[\"form\"].validate(async (valid) => {\n          if (!valid) {\n            return;\n          }\n          if (this.$refs.stepTwo.isInputOthers) {\n            return;\n          }\n          if (this.$refs.stepTwo.form.radio1 === \"D. Self describe:\") {\n            this.$refs.stepTwo.form.radio1 =\n              this.$refs.stepTwo.form.radio1 + this.$refs.stepTwo.others;\n          }\n          this.form = { ...this.form, ...this.$refs.stepTwo.form };\n          console.log(this.form);\n          //保存最后一次问卷\n          that.$store.commit(\"SET_ALL_QUESTION_FORM\", {\n            ...that.allQuestionForm,\n            lastQuestionnaire: { ...that.form },\n            endTime: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n          });\n          that.loading = true;\n          const res = await api.submitForm({\n            ...that.allQuestionForm,\n            index: this.gameGroupType,\n          });\n          if (res.code === 200) {\n            that.$message.success(\"Submitted successfully\");\n            this.$store.commit(\"SET_ALL_QUESTION_FORM\", {});\n            this.$store.commit(\"SET_GAME_STEP\", \"\");\n            this.$store.commit(\"SET_QUES_STEP\", \"\");\n            this.$store.commit(\"SET_IS_PASS\", true);\n            window.location.replace(\n              \"https://connect.cloudresearch.com/participant/project/3f07c8e99a444971a2c7b16de468d483/complete\"\n            );\n          } else {\n            that.loading = false;\n            that.$message.error(res.message);\n          }\n        });\n      }\n    },\n    checkRadio(item, key) {\n      this.$set(this.form, key, item);\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n::v-deep .ant-input {\n  border: none !important;\n  width: 100%;\n}\n::v-deep .ant-input:focus {\n  box-shadow: none;\n}\n.wrapper {\n  width: 100%;\n  overflow: auto;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  .content {\n    padding: 20px 8%;\n  }\n}\n</style>"],"mappings":"AAoBA,OAAAA,GAAA;AACA,OAAAC,OAAA;AACA,OAAAC,OAAA;AACA,OAAAC,MAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAJ,OAAA;IAAAC;EAAA;EACAI,KAAA;IACA;MACAC,OAAA;MACAC,MAAA;MACAC,IAAA;MACAC,UAAA;QACAC,OAAA;QACAC,MAAA;QACAC,UAAA;MACA;MACAC,QAAA;QACAC,EAAA;UAAAC,IAAA;QAAA;QACAC,EAAA;UAAAD,IAAA;QAAA;MACA;MACAE,UAAA;QACAH,EAAA;UAAAC,IAAA;QAAA;QACAC,EAAA;UAAAD,IAAA;QAAA;MACA;IACA;EACA;EACAG,QAAA;IACAC,MAAA,CAAAC,QAAA;EACA;EACAC,KAAA;IACAd,OAAAe,GAAA;MACAH,MAAA,CAAAC,QAAA;IACA;EACA;EACAG,OAAA;IACAC,aAAA;MACA,MAAAC,IAAA;MACA,SAAAlB,MAAA;QACA,KAAAmB,KAAA,CAAA1B,OAAA,CAAA0B,KAAA,SAAAC,QAAA,OAAAC,KAAA;UACA,KAAAA,KAAA;YACA;UACA;UACA,KAAApB,IAAA;YAAA,QAAAA,IAAA;YAAA,QAAAkB,KAAA,CAAA1B,OAAA,CAAAQ;UAAA;UACA,KAAAD,MAAA;QACA;MACA;QACA,KAAAmB,KAAA,CAAAzB,OAAA,CAAAyB,KAAA,SAAAC,QAAA,OAAAC,KAAA;UACA,KAAAA,KAAA;YACA;UACA;UACA,SAAAF,KAAA,CAAAzB,OAAA,CAAA4B,aAAA;YACA;UACA;UACA,SAAAH,KAAA,CAAAzB,OAAA,CAAAO,IAAA,CAAAsB,MAAA;YACA,KAAAJ,KAAA,CAAAzB,OAAA,CAAAO,IAAA,CAAAsB,MAAA,GACA,KAAAJ,KAAA,CAAAzB,OAAA,CAAAO,IAAA,CAAAsB,MAAA,QAAAJ,KAAA,CAAAzB,OAAA,CAAA8B,MAAA;UACA;UACA,KAAAvB,IAAA;YAAA,QAAAA,IAAA;YAAA,QAAAkB,KAAA,CAAAzB,OAAA,CAAAO;UAAA;UACAwB,OAAA,CAAAC,GAAA,MAAAzB,IAAA;UACA;UACAiB,IAAA,CAAAS,MAAA,CAAAC,MAAA;YACA,GAAAV,IAAA,CAAAW,eAAA;YACAC,iBAAA;cAAA,GAAAZ,IAAA,CAAAjB;YAAA;YACA8B,OAAA,EAAApC,MAAA,GAAAqC,MAAA;UACA;UACAd,IAAA,CAAAnB,OAAA;UACA,MAAAkC,GAAA,SAAAzC,GAAA,CAAA0C,UAAA;YACA,GAAAhB,IAAA,CAAAW,eAAA;YACAM,KAAA,OAAAC;UACA;UACA,IAAAH,GAAA,CAAAI,IAAA;YACAnB,IAAA,CAAAoB,QAAA,CAAAC,OAAA;YACA,KAAAZ,MAAA,CAAAC,MAAA;YACA,KAAAD,MAAA,CAAAC,MAAA;YACA,KAAAD,MAAA,CAAAC,MAAA;YACA,KAAAD,MAAA,CAAAC,MAAA;YACAhB,MAAA,CAAA4B,QAAA,CAAAC,OAAA,CACA,iGACA;UACA;YACAvB,IAAA,CAAAnB,OAAA;YACAmB,IAAA,CAAAoB,QAAA,CAAAI,KAAA,CAAAT,GAAA,CAAAU,OAAA;UACA;QACA;MACA;IACA;IACAC,WAAAC,IAAA,EAAAC,GAAA;MACA,KAAAC,IAAA,MAAA9C,IAAA,EAAA6C,GAAA,EAAAD,IAAA;IACA;EACA;AACA"}]}