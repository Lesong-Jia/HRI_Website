{"remainingRequest":"/Users/byo_0/Desktop/unity3d-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/byo_0/Desktop/unity3d-vue/src/views/lastQuestionnaire/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/byo_0/Desktop/unity3d-vue/src/views/lastQuestionnaire/index.vue","mtime":1706923579275},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/cache-loader/dist/cjs.js","mtime":1706926219963},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/babel-loader/lib/index.js","mtime":1706926220370},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/cache-loader/dist/cjs.js","mtime":1706926219963},{"path":"/Users/byo_0/Desktop/unity3d-vue/node_modules/vue-loader/lib/index.js","mtime":1706926220653}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBhcGkgZnJvbSAiQC9hcGkvaW5kZXguanMiOwppbXBvcnQgc3RlcE9uZSBmcm9tICIuL2NvbXBvbmVudHMvc3RlcE9uZS52dWUiOwppbXBvcnQgc3RlcFR3byBmcm9tICIuL2NvbXBvbmVudHMvc3RlcFR3by52dWUiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibGFzdCIsCiAgY29tcG9uZW50czogeyBzdGVwT25lLCBzdGVwVHdvIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBhY3RpdmU6IDEsCiAgICAgIGZvcm06IHt9LAogICAgICByYWRpb1N0eWxlOiB7CiAgICAgICAgZGlzcGxheTogImJsb2NrIiwKICAgICAgICBoZWlnaHQ6ICIzMHB4IiwKICAgICAgICBsaW5lSGVpZ2h0OiAiMzBweCIsCiAgICAgIH0sCiAgICAgIGxhYmVsQ29sOiB7CiAgICAgICAgeHM6IHsgc3BhbjogMTggfSwKICAgICAgICBzbTogeyBzcGFuOiA0IH0sCiAgICAgIH0sCiAgICAgIHdyYXBwZXJDb2w6IHsKICAgICAgICB4czogeyBzcGFuOiAyNCB9LAogICAgICAgIHNtOiB7IHNwYW46IDE5IH0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKICB9LAogIHdhdGNoOiB7CiAgICBhY3RpdmUodmFsKSB7CiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDEpIHsKICAgICAgICB0aGlzLiRyZWZzLnN0ZXBPbmUuJHJlZnNbImZvcm0iXS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5mb3JtID0geyAuLi50aGlzLmZvcm0sIC4uLnRoaXMuJHJlZnMuc3RlcE9uZS5mb3JtIH07CiAgICAgICAgICB0aGlzLmFjdGl2ZSA9IDI7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy5zdGVwVHdvLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CiAgICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnN0ZXBUd28uaXNJbnB1dE90aGVycykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy4kcmVmcy5zdGVwVHdvLmZvcm0ucmFkaW8xID09PSAiRC4gU2VsZiBkZXNjcmliZToiKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuc3RlcFR3by5mb3JtLnJhZGlvMSA9CiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5zdGVwVHdvLmZvcm0ucmFkaW8xICsgdGhpcy4kcmVmcy5zdGVwVHdvLm90aGVyczsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZm9ybSA9IHsgLi4udGhpcy5mb3JtLCAuLi50aGlzLiRyZWZzLnN0ZXBUd28uZm9ybSB9OwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgICAgIC8v5L+d5a2Y5pyA5ZCO5LiA5qyh6Zeu5Y23CiAgICAgICAgICB0aGF0LiRzdG9yZS5jb21taXQoIlNFVF9BTExfUVVFU1RJT05fRk9STSIsIHsKICAgICAgICAgICAgLi4udGhhdC5hbGxRdWVzdGlvbkZvcm0sCiAgICAgICAgICAgIGxhc3RRdWVzdGlvbm5haXJlOiB7IC4uLnRoYXQuZm9ybSB9LAogICAgICAgICAgICBlbmRUaW1lOiBtb21lbnQoKS5mb3JtYXQoIllZWVktTU0tREQgSEg6bW06c3MiKSwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhhdC5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5zdWJtaXRGb3JtKHsKICAgICAgICAgICAgLi4udGhhdC5hbGxRdWVzdGlvbkZvcm0sCiAgICAgICAgICAgIGluZGV4OiB0aGlzLmdhbWVHcm91cFR5cGUsCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcygiU3VibWl0dGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9BTExfUVVFU1RJT05fRk9STSIsIHt9KTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfR0FNRV9TVEVQIiwgIiIpOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9RVUVTX1NURVAiLCAiIik7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX0lTX1BBU1MiLCB0cnVlKTsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoCiAgICAgICAgICAgICAgImh0dHBzOi8vY29ubmVjdC5jbG91ZHJlc2VhcmNoLmNvbS9wYXJ0aWNpcGFudC9wcm9qZWN0LzNmMDdjOGU5OWE0NDQ5NzFhMmM3YjE2ZGU0NjhkNDgzL2NvbXBsZXRlIgogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhhdC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2hlY2tSYWRpbyhpdGVtLCBrZXkpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybSwga2V5LCBpdGVtKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/lastQuestionnaire","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"content\">\n      <stepOne ref=\"stepOne\" v-if=\"active === 1\" />\n      <stepTwo ref=\"stepTwo\" v-if=\"active === 2\" />\n    </div>\n    <div class=\"input-wrapper\">\n      <a-button\n        type=\"primary\"\n        shape=\"round\"\n        :disabled=\"loading\"\n        :loading=\"loading\"\n        @click=\"handleSubmit\"\n      >\n        {{ active === 1 ? \"Next\" : \"Submit\" }}\n      </a-button>\n    </div>\n  </div>\n</template>\n<script>\nimport api from \"@/api/index.js\";\nimport stepOne from \"./components/stepOne.vue\";\nimport stepTwo from \"./components/stepTwo.vue\";\nimport moment from \"moment\";\nexport default {\n  name: \"last\",\n  components: { stepOne, stepTwo },\n  data() {\n    return {\n      loading: false,\n      active: 1,\n      form: {},\n      radioStyle: {\n        display: \"block\",\n        height: \"30px\",\n        lineHeight: \"30px\",\n      },\n      labelCol: {\n        xs: { span: 18 },\n        sm: { span: 4 },\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 19 },\n      },\n    };\n  },\n  mounted() {\n    window.scrollTo(0, 0);\n  },\n  watch: {\n    active(val) {\n      window.scrollTo(0, 0);\n    },\n  },\n  methods: {\n    handleSubmit() {\n      const that = this;\n      if (this.active === 1) {\n        this.$refs.stepOne.$refs[\"form\"].validate(async (valid) => {\n          if (!valid) {\n            return;\n          }\n          this.form = { ...this.form, ...this.$refs.stepOne.form };\n          this.active = 2;\n        });\n      } else {\n        this.$refs.stepTwo.$refs[\"form\"].validate(async (valid) => {\n          if (!valid) {\n            return;\n          }\n          if (this.$refs.stepTwo.isInputOthers) {\n            return;\n          }\n          if (this.$refs.stepTwo.form.radio1 === \"D. Self describe:\") {\n            this.$refs.stepTwo.form.radio1 =\n              this.$refs.stepTwo.form.radio1 + this.$refs.stepTwo.others;\n          }\n          this.form = { ...this.form, ...this.$refs.stepTwo.form };\n          console.log(this.form);\n          //保存最后一次问卷\n          that.$store.commit(\"SET_ALL_QUESTION_FORM\", {\n            ...that.allQuestionForm,\n            lastQuestionnaire: { ...that.form },\n            endTime: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n          });\n          that.loading = true;\n          const res = await api.submitForm({\n            ...that.allQuestionForm,\n            index: this.gameGroupType,\n          });\n          if (res.code === 200) {\n            that.$message.success(\"Submitted successfully\");\n            this.$store.commit(\"SET_ALL_QUESTION_FORM\", {});\n            this.$store.commit(\"SET_GAME_STEP\", \"\");\n            this.$store.commit(\"SET_QUES_STEP\", \"\");\n            this.$store.commit(\"SET_IS_PASS\", true);\n            window.location.replace(\n              \"https://connect.cloudresearch.com/participant/project/3f07c8e99a444971a2c7b16de468d483/complete\"\n            );\n          } else {\n            that.loading = false;\n            that.$message.error(res.message);\n          }\n        });\n      }\n    },\n    checkRadio(item, key) {\n      this.$set(this.form, key, item);\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n::v-deep .ant-input {\n  border: none !important;\n  width: 100%;\n}\n::v-deep .ant-input:focus {\n  box-shadow: none;\n}\n.wrapper {\n  width: 100%;\n  overflow: auto;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  .content {\n    padding: 20px 8%;\n  }\n}\n</style>"]}]}