{"remainingRequest":"/Users/jialesong/Desktop/HRI_Website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jialesong/Desktop/HRI_Website/src/views/lastQuestionnaire/index.vue?vue&type=style&index=0&id=43a3fc74&lang=less&scoped=true","dependencies":[{"path":"/Users/jialesong/Desktop/HRI_Website/src/views/lastQuestionnaire/index.vue","mtime":1706923579000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/css-loader/dist/cjs.js","mtime":1706926220000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1706926220000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/postcss-loader/src/index.js","mtime":1706926220000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/less-loader/dist/cjs.js","mtime":1706926220000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/cache-loader/dist/cjs.js","mtime":1706926219000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/vue-loader/lib/index.js","mtime":1706926220000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cjo6di1kZWVwIC5hbnQtaW5wdXQgewogIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OwogIHdpZHRoOiAxMDAlOwp9Cjo6di1kZWVwIC5hbnQtaW5wdXQ6Zm9jdXMgewogIGJveC1zaGFkb3c6IG5vbmU7Cn0KLndyYXBwZXIgewogIHdpZHRoOiAxMDAlOwogIG92ZXJmbG93OiBhdXRvOwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIC5jb250ZW50IHsKICAgIHBhZGRpbmc6IDIwcHggOCU7CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/lastQuestionnaire","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"content\">\n      <stepOne ref=\"stepOne\" v-if=\"active === 1\" />\n      <stepTwo ref=\"stepTwo\" v-if=\"active === 2\" />\n    </div>\n    <div class=\"input-wrapper\">\n      <a-button\n        type=\"primary\"\n        shape=\"round\"\n        :disabled=\"loading\"\n        :loading=\"loading\"\n        @click=\"handleSubmit\"\n      >\n        {{ active === 1 ? \"Next\" : \"Submit\" }}\n      </a-button>\n    </div>\n  </div>\n</template>\n<script>\nimport api from \"@/api/index.js\";\nimport stepOne from \"./components/stepOne.vue\";\nimport stepTwo from \"./components/stepTwo.vue\";\nimport moment from \"moment\";\nexport default {\n  name: \"last\",\n  components: { stepOne, stepTwo },\n  data() {\n    return {\n      loading: false,\n      active: 1,\n      form: {},\n      radioStyle: {\n        display: \"block\",\n        height: \"30px\",\n        lineHeight: \"30px\",\n      },\n      labelCol: {\n        xs: { span: 18 },\n        sm: { span: 4 },\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 19 },\n      },\n    };\n  },\n  mounted() {\n    window.scrollTo(0, 0);\n  },\n  watch: {\n    active(val) {\n      window.scrollTo(0, 0);\n    },\n  },\n  methods: {\n    handleSubmit() {\n      const that = this;\n      if (this.active === 1) {\n        this.$refs.stepOne.$refs[\"form\"].validate(async (valid) => {\n          if (!valid) {\n            return;\n          }\n          this.form = { ...this.form, ...this.$refs.stepOne.form };\n          this.active = 2;\n        });\n      } else {\n        this.$refs.stepTwo.$refs[\"form\"].validate(async (valid) => {\n          if (!valid) {\n            return;\n          }\n          if (this.$refs.stepTwo.isInputOthers) {\n            return;\n          }\n          if (this.$refs.stepTwo.form.radio1 === \"D. Self describe:\") {\n            this.$refs.stepTwo.form.radio1 =\n              this.$refs.stepTwo.form.radio1 + this.$refs.stepTwo.others;\n          }\n          this.form = { ...this.form, ...this.$refs.stepTwo.form };\n          console.log(this.form);\n          //保存最后一次问卷\n          that.$store.commit(\"SET_ALL_QUESTION_FORM\", {\n            ...that.allQuestionForm,\n            lastQuestionnaire: { ...that.form },\n            endTime: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n          });\n          that.loading = true;\n          const res = await api.submitForm({\n            ...that.allQuestionForm,\n            index: this.gameGroupType,\n          });\n          if (res.code === 200) {\n            that.$message.success(\"Submitted successfully\");\n            this.$store.commit(\"SET_ALL_QUESTION_FORM\", {});\n            this.$store.commit(\"SET_GAME_STEP\", \"\");\n            this.$store.commit(\"SET_QUES_STEP\", \"\");\n            this.$store.commit(\"SET_IS_PASS\", true);\n            window.location.replace(\n              \"https://connect.cloudresearch.com/participant/project/3f07c8e99a444971a2c7b16de468d483/complete\"\n            );\n          } else {\n            that.loading = false;\n            that.$message.error(res.message);\n          }\n        });\n      }\n    },\n    checkRadio(item, key) {\n      this.$set(this.form, key, item);\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n::v-deep .ant-input {\n  border: none !important;\n  width: 100%;\n}\n::v-deep .ant-input:focus {\n  box-shadow: none;\n}\n.wrapper {\n  width: 100%;\n  overflow: auto;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  .content {\n    padding: 20px 8%;\n  }\n}\n</style>"]}]}