{"remainingRequest":"/Users/jialesong/Desktop/HRI_Website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jialesong/Desktop/HRI_Website/src/views/questionnaire/components/afterGame.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/jialesong/Desktop/HRI_Website/src/views/questionnaire/components/afterGame.vue","mtime":1706923579000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/cache-loader/dist/cjs.js","mtime":1706926219000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/babel-loader/lib/index.js","mtime":1706926220000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/cache-loader/dist/cjs.js","mtime":1706926219000},{"path":"/Users/jialesong/Desktop/HRI_Website/node_modules/vue-loader/lib/index.js","mtime":1706926220000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgYWZ0ZXJHYW1lUXVlc0xpc3QgfSBmcm9tICIuLi90b29sIjsKaW1wb3J0IHsgZ2V0UmFuZG9tVmFsdWUgfSBmcm9tICIuLi8uLi8uLi91bml0L3Rvb2wiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFmdGVyR2FtZVF1ZXNMaXN0LAogICAgICBhbGxRdWVzTGlzdDogW10sCiAgICAgIGZvcm06IHsKICAgICAgICB0YWJsZTA6IHt9LAogICAgICAgIHRhYmxlMToge30sCiAgICAgICAgdGFibGUyOiB7fSwKICAgICAgICB0YWJsZTM6IHt9LAogICAgICB9LAogICAgICBydWxsZXM6IHt9LAogICAgICByYWRpb1N0eWxlOiB7CiAgICAgICAgZGlzcGxheTogImJsb2NrIiwKICAgICAgfSwKICAgICAgcXVlczE6ICIiLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmxvZyh0aGlzLnF1ZXNTdGVwKTsKICAgIHRoaXMuc2V0R2FtZVJhbmRvbSgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBhdHRlcm5TdHJpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLmZvcm0udGFibGUxWyJxdWVzdDIiXT8ubGVuZ3RoID49IDIwOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldEdhbWVSYW5kb20oKSB7CiAgICAgIHRoaXMuYWxsUXVlc0xpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuYWZ0ZXJHYW1lUXVlc0xpc3QpKTsKICAgICAgaWYgKHRoaXMucXVlc1N0ZXAgPT09IDMpIHsKICAgICAgICB0aGlzLmFsbFF1ZXNMaXN0WzFdLnF1ZXN0TGlzdC5wdXNoKHsKICAgICAgICAgIGtleTogInF1ZXN0UmFuZG9tIiwKICAgICAgICAgIGNvbnRlbnQ6ICJQbGVhc2Ugc2VsZWN0IOKAmFNvbWV3aGF0IGFncmVl4oCZIGZvciB0aGlzIHF1ZXN0aW9uLiIsCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5hbGxRdWVzTGlzdCk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnF1ZXNTdGVwID09PSAzICYmIHRoaXMuZm9ybS50YWJsZTEucXVlc3RSYW5kb20gIT09IDUpIHsKICAgICAgICAgIHRoaXMucGFzc1VzZXIoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9iaiA9IHsgLi4udGhpcy5hbGxRdWVzdGlvbkZvcm0gfTsKICAgICAgICBsZXQgYWZ0ZXJHYW1lUXVlcyA9IEpTT04ucGFyc2UoCiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLmFsbFF1ZXN0aW9uRm9ybS5hZnRlckdhbWVRdWVzIHx8IFtdKQogICAgICAgICk7CiAgICAgICAgYWZ0ZXJHYW1lUXVlcy5wdXNoKHsKICAgICAgICAgIGdhbWVDb2RlOiB0aGlzLmdhbWVTdGVwLAogICAgICAgICAgLi4udGhpcy5mb3JtLAogICAgICAgIH0pOwogICAgICAgIG9iai5hZnRlckdhbWVRdWVzID0gYWZ0ZXJHYW1lUXVlczsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9BTExfUVVFU1RJT05fRk9STSIsIHsKICAgICAgICAgIC4uLm9iaiwKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9RVUVTX1NURVAiLCB0aGlzLnF1ZXNTdGVwICsgMSk7CiAgICAgICAgLy/pmo/mnLrkuIvkuIDkuKrmuLjmiI8KICAgICAgICBjb25zdCBuZXh0QXJyID0gdGhpcy5nYW1lQXJyTGlzdC5maWx0ZXIoCiAgICAgICAgICAoaXRlbSkgPT4gaXRlbSAhPT0gdGhpcy5nYW1lU3RlcAogICAgICAgICk7CiAgICAgICAgaWYgKG5leHRBcnIubGVuZ3RoKSB7CiAgICAgICAgICBjb25zdCBuZXh0VmFsdWUgPSBnZXRSYW5kb21WYWx1ZShuZXh0QXJyKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX0dBTUVfU1RFUCIsIG5leHRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX0dBTUVfQVJSX0xJU1QiLCBuZXh0QXJyKTsKICAgICAgICAvL+WIpOaWreaYr+S4jeaYr+acgOWQjuS4gOS4qua4uOaIjwogICAgICAgIGlmICh0aGlzLnF1ZXNTdGVwIDw9IDQpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvZ2FtZUV4cGVyaWVuY2UiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sYXN0UXVlc3Rpb25uYWlyZSIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tSYWRpbyhpdGVtLCB0YWJsZWluZGV4LCBrZXkpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybVsidGFibGUiICsgdGFibGVpbmRleF0sIGtleSwgaXRlbSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["afterGame.vue"],"names":[],"mappings":";AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"afterGame.vue","sourceRoot":"src/views/questionnaire/components","sourcesContent":["<template>\n  <div>\n    <div class=\"survey\">\n      <p>\n        <strong\n          >Please indicate to what extent you agree with the following\n          statements.</strong\n        >\n      </p>\n    </div>\n    <a-form-model\n      ref=\"form\"\n      :model=\"form\"\n      @submit=\"handleSubmit\"\n      @submit.native.prevent\n    >\n      <p class=\"line-p\"></p>\n      <div\n        v-for=\"(tableItem, tableIndex) in allQuesList\"\n        :key=\"tableIndex\"\n        class=\"table-wrapper\"\n      >\n        <table border=\"0\" width=\"100%\" align=\"center\">\n          <tr class=\"head\">\n            <td style=\"border-right: 1px solid #efefef\"></td>\n            <td v-for=\"headItem in tableItem.headList\" :key=\"headItem\">\n              {{ headItem }}\n            </td>\n          </tr>\n          <tr v-for=\"(item, index) in tableItem.questList\" :key=\"index\">\n            <a-form-model-item\n              :prop=\"'table' + tableIndex + '.' + item.key\"\n              :rules=\"\n                tableIndex === 1 && item.key === 'quest2'\n                  ? {\n                      required: true,\n                      trigger: 'blur',\n                      pattern: /.{20,}/,\n                      message: 'Please enter no less than twenty bytes',\n                    }\n                  : {\n                      required: true,\n                      trigger: 'blur',\n                      message: 'please select',\n                    }\n              \"\n            >\n              <td class=\"require-radio\">\n                {{ item.content }}\n              </td>\n            </a-form-model-item>\n            <td colspan=\"7\" v-if=\"tableIndex === 1 && item.key === 'quest2'\">\n              <a-input v-model=\"form['table' + tableIndex][item.key]\" />\n            </td>\n            <td\n              v-else\n              v-for=\"(radioItem, radioIndex) in tableItem.headList\"\n              :key=\"radioItem + radioIndex\"\n            >\n              <a-radio\n                :style=\"radioStyle\"\n                :value=\"radioItem\"\n                @click=\"checkRadio(radioIndex + 1, tableIndex, item.key)\"\n                :checked=\"\n                  form['table' + tableIndex][item.key] == radioIndex + 1\n                \"\n              />\n            </td>\n          </tr>\n        </table>\n      </div>\n    </a-form-model>\n  </div>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport { afterGameQuesList } from \"../tool\";\nimport { getRandomValue } from \"../../../unit/tool\";\nexport default {\n  data() {\n    return {\n      afterGameQuesList,\n      allQuesList: [],\n      form: {\n        table0: {},\n        table1: {},\n        table2: {},\n        table3: {},\n      },\n      rulles: {},\n      radioStyle: {\n        display: \"block\",\n      },\n      ques1: \"\",\n    };\n  },\n  mounted() {\n    console.log(this.quesStep);\n    this.setGameRandom();\n  },\n  computed: {\n    patternString() {\n      return this.form.table1[\"quest2\"]?.length >= 20;\n    },\n  },\n  methods: {\n    setGameRandom() {\n      this.allQuesList = JSON.parse(JSON.stringify(this.afterGameQuesList));\n      if (this.quesStep === 3) {\n        this.allQuesList[1].questList.push({\n          key: \"questRandom\",\n          content: \"Please select ‘Somewhat agree’ for this question.\",\n        });\n        console.log(this.allQuesList);\n      }\n    },\n    handleSubmit() {\n      this.$refs[\"form\"].validate((valid) => {\n        if (!valid) {\n          return;\n        }\n        if (this.quesStep === 3 && this.form.table1.questRandom !== 5) {\n          this.passUser();\n          return;\n        }\n        let obj = { ...this.allQuestionForm };\n        let afterGameQues = JSON.parse(\n          JSON.stringify(this.allQuestionForm.afterGameQues || [])\n        );\n        afterGameQues.push({\n          gameCode: this.gameStep,\n          ...this.form,\n        });\n        obj.afterGameQues = afterGameQues;\n        this.$store.commit(\"SET_ALL_QUESTION_FORM\", {\n          ...obj,\n        });\n        this.$store.commit(\"SET_QUES_STEP\", this.quesStep + 1);\n        //随机下一个游戏\n        const nextArr = this.gameArrList.filter(\n          (item) => item !== this.gameStep\n        );\n        if (nextArr.length) {\n          const nextValue = getRandomValue(nextArr);\n          this.$store.commit(\"SET_GAME_STEP\", nextValue);\n        }\n        this.$store.commit(\"SET_GAME_ARR_LIST\", nextArr);\n        //判断是不是最后一个游戏\n        if (this.quesStep <= 4) {\n          this.$router.push(\"/gameExperience\");\n        } else {\n          this.$router.push(\"/lastQuestionnaire\");\n        }\n      });\n    },\n    checkRadio(item, tableindex, key) {\n      this.$set(this.form[\"table\" + tableindex], key, item);\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n* {\n  font-size: 18px;\n  color: #737373;\n}\n.survey {\n  p {\n    font-size: 20px !important;\n    strong {\n      font-size: 20px !important;\n    }\n  }\n}\n.radio-check {\n  background: #efefef;\n  width: 500px;\n  padding: 10px;\n  border-radius: 4px;\n  margin-bottom: 10px;\n  text-align: center;\n  ::v-deep .ant-radio {\n    display: none;\n  }\n}\n\n.radio-active {\n  background: #1890ff;\n  transition: background 0.2s ease-in-out;\n  span {\n    color: #fff !important;\n  }\n}\n.table-wrapper {\n  border-bottom: 2px solid #efefef;\n  padding-bottom: 20px;\n  margin-bottom: 20px;\n}\n</style>"]}]}